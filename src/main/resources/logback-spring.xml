<configuration>

    <!-- Configurables por properties o variables de entorno -->
    <property name="LOGSTASH_HOST" value="${LOGSTASH_HOST:-localhost}" />
    <property name="LOGSTASH_PORT" value="${LOGSTASH_PORT:-5000}" />

    <!-- Appender de consola en JSON -->
    <appender name="CONSOLE_JSON" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LogstashEncoder" />
    </appender>

    <!-- Appender TCP hacia Logstash -->
    <appender name="LOGSTASH" class="net.logstash.logback.appender.LogstashTcpSocketAppender">
        <destination>${LOGSTASH_HOST}:${LOGSTASH_PORT}</destination>
        <!-- ⬇⬇⬇ ESTE encoder era lo que te faltaba -->
        <encoder class="net.logstash.logback.encoder.LogstashEncoder" />
    </appender>

    <!-- Root logger -->
    <root level="INFO">
        <appender-ref ref="CONSOLE_JSON" />
        <appender-ref ref="LOGSTASH" />
    </root>

    <!-- Más detalle para tu package -->
    <logger name="com.bank_services.account" level="DEBUG" />
</configuration>
